/**
 * BottleJS v2.0.1 - 2022-06-28
 * A powerful dependency injection micro container
 *
 * Copyright (c) 2022 Stephen Young
 * Licensed MIT
 */
!function(u){"use strict";function d(t,e){return e(t)}function f(t,e){return(t[e]||[]).concat(t.__global__||[])}function r(t,e){var r=t.split(p);if(!this.providerMap[t]||1!==r.length||this.container[t+y])return this.originalProviders[t]=e,this.providerMap[t]=!0,t=r.shift(),r.length?($.call(this,t).provider(r.join(p),e),this):O.call(this,t,e)}function i(t,r,i){var n=3<arguments.length?m.call(arguments,3):[],o=this;return _.call(this,t,function(){var t=r,e=n.map(P,o.container);return i?new(r.bind.apply(r,[null].concat(e))):t.apply(null,e)})}function n(t,e){var r=t[e];return r||x.call(t,e,r={}),r}function o(t,e){var r;return typeof t===v&&(e=t,t=g),r=(t=t.split(p)).shift(),t.length?$.call(this,r).decorator(t.join(p),e):(this.decorators[r]||(this.decorators[r]=[]),this.decorators[r].push(e)),this}function s(t){return Object.keys(t||this.container||{}).filter(B)}function c(t){var e=t.$value===u?t:t.$value;return this[t.$type||"service"].apply(this,[t.$name,e].concat(t.$inject||[]))}function a(t){delete this.providerMap[t],delete this.container[t],delete this.container[t+y]}var t,e,l,h,p=".",v="function",b="string",g="__global__",y="Provider",w=0,m=Array.prototype.slice,j=function(t,e){t=t[e];if(t===u&&M.config.strict)throw new Error("Bottle was unable to resolve a service.  `"+e+"` is undefined.");return t},$=function(t){var e;return this.nested[t]||(e=M.pop(),this.nested[t]=e,this.factory(t,function(){return e.container})),this.nested[t]},P=function(t){return t.split(p).reduce(j,this)},O=function(o,e){this.id;var s=this.container,c=this.decorators,a=this.middlewares,l=o+y,t=Object.create(null);return t[l]={configurable:!0,enumerable:!0,get:function(){var t=new e;return delete s[l],s[l]=t}},t[o]={configurable:!0,enumerable:!0,get:function(){var i,n,t,e,r=s[l];return r&&(t=f(c,o).reduce(d,r.$get(s)),delete s[l],delete s[o]),t===u?t:(i=f(a,o),r=o,n=t,t=s,e={configurable:!0,enumerable:!0},i.length?e.get=function(){var e=0,r=function(t){if(t)throw t;i[e]&&i[e++](n,r)};return r(),n}:(e.value=n,e.writable=!0),Object.defineProperty(t,r,e),t[r])}},Object.defineProperties(s,t),this},_=function(t,e){return r.call(this,t,function(){this.$get=e})},x=function(t,e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})},B=function(t){return!/^\$(?:decorator|register|list)$|Provider$/.test(t)},E={},M=function t(e){if(!(this instanceof t))return t.pop(e);this.id=w++,this.decorators={},this.middlewares={},this.nested={},this.providerMap={},this.originalProviders={},this.deferred=[],this.container={$decorator:o.bind(this),$register:c.bind(this),$list:s.bind(this)}},A=(M.prototype={constant:function(t,e){var r=t.split(p);return t=r.pop(),function(t,e){Object.defineProperty(this,t,{configurable:!1,enumerable:!0,value:e,writable:!1})}.call(r.reduce(n,this.container),t,e),this},decorator:o,defer:function(t){return this.deferred.push(t),this},digest:function(t){return(t||[]).map(P,this.container)},factory:_,instanceFactory:function(t,e){return _.call(this,t,function(t){return{instance:e.bind(e,t)}})},list:s,middleware:function(t,e){var r;return typeof t===v&&(e=t,t=g),r=(t=t.split(p)).shift(),t.length?$.call(this,r).middleware(t.join(p),e):(this.middlewares[r]||(this.middlewares[r]=[]),this.middlewares[r].push(e)),this},provider:r,resetProviders:function(r){var i=this.originalProviders,n=Array.isArray(r);Object.keys(this.originalProviders).forEach(function(t){var e;n&&-1===r.indexOf(t)||(1<(e=t.split(p)).length&&e.forEach(a,$.call(this,e[0])),a.call(this,t),this.provider(t,i[t]))},this)},register:c,resolve:function(e){return this.deferred.forEach(function(t){t(e)}),this},service:function(t,e){return i.apply(this,[t,e,!0].concat(m.call(arguments,2)))},serviceFactory:function(t,e){return i.apply(this,[t,e,!1].concat(m.call(arguments,2)))},value:function(t,e){var r=t.split(p);return t=r.pop(),x.call(r.reduce(n,this.container),t,e),this}},M.pop=function(t){var e;return typeof t==b?((e=E[t])||(E[t]=e=new M,e.constant("BOTTLE_NAME",t)),e):new M},M.clear=function(t){typeof t==b?delete E[t]:E={}},M.list=s,M.config={strict:!1},{function:!0,object:!0});t=A[typeof window]&&window||this,e=A[typeof exports]&&exports&&!exports.nodeType&&exports,l=A[typeof module]&&module&&!module.nodeType&&module,h=l&&l.exports===e&&e,!(A=A[typeof global]&&global)||A.global!==A&&A.window!==A||(t=A),typeof define===v&&"object"==typeof define.amd&&define.amd?(t.Bottle=M,define(function(){return M})):e&&l?h?(l.exports=M).Bottle=M:e.Bottle=M:t.Bottle=M}.call(this);
//# sourceMappingURL=bottle.min.js.map